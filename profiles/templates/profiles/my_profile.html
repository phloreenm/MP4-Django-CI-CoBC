{% extends "base.html" %}
{% load static %}
{% block content %}
<div class="container my-4">
  <h1>My Profile</h1>
  <p><strong>Username:</strong> {{ request.user.username }}</p>
  <p><strong>Email:</strong> {{ request.user.email }}</p>
  <p><strong>Phone Number:</strong> {{ profile.phone_number }}</p>
  <p><strong>Address:</strong> {{ profile.formatted_address }}</p>
  <p><strong>County:</strong> {{ profile.county }}</p>
  <p><strong>Date of Birth:</strong> {{ profile.date_of_birth }}</p>
  <p><strong>Bio:</strong> {{ profile.bio }}</p>
  {% if profile.profile_picture %}
    <img src="{{ profile.profile_picture.url }}" alt="Profile Picture" style="max-width: 200px;">
  {% endif %}
  <div class="mt-4">
    <a href="{% url 'profiles:edit_profile' %}" class="btn btn-primary">Edit Profile</a>
  </div>

  <!-- My Downloads Section -->
  <div class="mt-5">
    <h2>My Downloads</h2>
    {% if downloads %}
      <ul class="list-group">
        {% for product in downloads %}
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <span>{{ product.name }}</span>
            {% if product.digital_file %}
              <a href="{{ product.digital_file.url }}" class="btn btn-sm btn-success" download>Download</a>
            {% else %}
              <span class="text-muted">No file available</span>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>You have not purchased any downloadable products yet.</p>
    {% endif %}
  </div>
</div>
{% endblock %}